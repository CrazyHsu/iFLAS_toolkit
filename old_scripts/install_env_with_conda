conda create -y -n iflas_20201130 python=2.7
conda activate iflas_20201130

conda install -y -c conda-forge r=3.6 perl=5.26.2
conda install -y -c bioconda perl-bioperl perl-app-cpanminus perl-dbi blast subread samtools=1.9 stringtie \
                        minimap2 seqkit hisat2 mash bedtools fastp
conda install -y -c bioconda ucsc-bedtogenepred ucsc-gtftogenepred ucsc-genepredtogtf
conda install -y -c bioconda isoseq3=3.3 pbccs=4.2 lima pbcoretools rmats=4.0.2 bax2bam pbbam=1.0.6 pbcopper=1.3.0
conda install -y -c bioconda bioconductor-deseq2 bioconductor-ebseq
conda install -y -c bcbio bx-python
conda install -y r-pheatmap r-emt r-stringi=1.4.6

pip install pandas matplotlib==2.2.3 scikit-image==0.14.3 scikit-learn psutil pulp networkx==2.2 PyWavelets==1.0.3 \
                biopython==1.76 pybedtools parasail PyVCF cpat

R -e "install.packages('tidyr', repos='https://mirrors.tuna.tsinghua.edu.cn/CRAN/')"
R -e "install.packages('valr', repos='https://mirrors.tuna.tsinghua.edu.cn/CRAN/')"
R -e "install.packages(c('gapminder','ggplot2','scales','reshape','gridExtra','grid','rpart','ROCR','caret','optparse','lattice','foreach','e1071','randomForest','partykit','ipred','rpart.plot','doMC','nnet','ROSE','pROC','MLmetrics'), repos = 'https://mirrors.tuna.tsinghua.edu.cn/CRAN/')"


git clone https://hub.fastgit.org/Magdoll/cDNA_Cupcake.git
cd cDNA_Cupcake
git checkout Py2_v8.7.x
python setup.py build && python setup.py install
cd ../

cpanm Log::Log4perl File::Which

git clone https://hub.fastgit.org/BioInf-Wuerzburg/proovread.git
cd proovread
make
cd ../

git clone https://hub.fastgit.org/CrazyHsu/SQANTI.git
cd SQANTI
chmod +x sqanti_qc.py
cd ../

git clone https://hub.fastgit.org/CrazyHsu/SpliceGrapher_packages.git
cd SpliceGrapher_packages
tar -xf PyML-0.7.14.tar.gz
cd PyML-0.7.14
python setup.py build && python setup.py install
cd ../
tar -xf SpliceGrapher-0.2.7.tgz
cd SpliceGrapher-0.2.7
python setup.py build && python setup.py install
cd ../
cd ../

git clone https://hub.fastgit.org/CrazyHsu/Cogent.git
cd Cogent
git checkout Py2.7_4.0.x && git submodule update --init --recursive
cd Complete-Striped-Smith-Waterman-Library/src && make && cd ../../
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:Complete-Striped-Smith-Waterman-Library/src
PYTHONPATH=$PYTHONPATH:Complete-Striped-Smith-Waterman-Library/src
python setup.py build && python setup.py install
cd ../